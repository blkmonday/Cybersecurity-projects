<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ClassConnect ‚Äî Southern University</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,500;0,9..40,700;1,9..40,400&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet" />
  <style>
    /* =============================================
       CSS VARIABLES & RESET
       ============================================= */
    :root {
      --su-gold: #FDB927;
      --su-gold-light: #FFD970;
      --su-gold-dim: #C8941F;
      --su-blue: #00529B;
      --su-blue-deep: #003366;
      --su-blue-dark: #001F3F;
      --su-blue-light: #1A6DB5;
      --bg-primary: #0A1628;
      --bg-card: #111E33;
      --bg-card-hover: #162844;
      --bg-input: #0D1A2E;
      --text-primary: #F0F4FA;
      --text-secondary: #8BA3C4;
      --text-muted: #5A7499;
      --border-color: #1E3454;
      --success: #34D399;
      --danger: #F87171;
      --warning: #FBBF24;
      --radius-sm: 8px;
      --radius-md: 14px;
      --radius-lg: 22px;
      --shadow-card: 0 4px 24px rgba(0,0,0,0.3);
      --shadow-glow: 0 0 30px rgba(253,185,39,0.15);
      --font-display: 'Playfair Display', Georgia, serif;
      --font-body: 'DM Sans', -apple-system, sans-serif;
      --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html { scroll-behavior: smooth; }

    body {
      font-family: var(--font-body);
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
    }

    /* =============================================
       BACKGROUND ATMOSPHERE
       ============================================= */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background:
        radial-gradient(ellipse 80% 50% at 20% 0%, rgba(0,82,155,0.15) 0%, transparent 60%),
        radial-gradient(ellipse 60% 40% at 80% 100%, rgba(253,185,39,0.08) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    /* =============================================
       SCROLLBAR
       ============================================= */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: var(--bg-primary); }
    ::-webkit-scrollbar-thumb { background: var(--su-blue); border-radius: 3px; }

    /* =============================================
       UTILITIES
       ============================================= */
    .hidden { display: none !important; }

    /* =============================================
       LOGIN SCREEN
       ============================================= */
    #login-screen {
      position: fixed;
      inset: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg-primary);
      animation: fadeIn 0.5s ease;
    }

    #login-screen::before {
      content: '';
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 30% 20%, rgba(0,82,155,0.2), transparent 50%),
        radial-gradient(circle at 70% 80%, rgba(253,185,39,0.1), transparent 50%);
      pointer-events: none;
    }

    .login-container {
      position: relative;
      z-index: 1;
      width: 100%;
      max-width: 420px;
      padding: 0 24px;
      animation: slideUp 0.7s ease;
    }

    .login-logo {
      text-align: center;
      margin-bottom: 40px;
    }

    .login-logo .logo-icon {
      width: 72px;
      height: 72px;
      background: linear-gradient(135deg, var(--su-gold), var(--su-gold-dim));
      border-radius: 20px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      margin-bottom: 20px;
      box-shadow: 0 8px 32px rgba(253,185,39,0.25);
    }

    .login-logo h1 {
      font-family: var(--font-display);
      font-size: 2.2rem;
      font-weight: 900;
      background: linear-gradient(135deg, var(--su-gold), var(--su-gold-light));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: -0.5px;
    }

    .login-logo p {
      color: var(--text-secondary);
      font-size: 0.95rem;
      margin-top: 6px;
      font-weight: 300;
    }

    .login-box {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-lg);
      padding: 36px 32px;
      box-shadow: var(--shadow-card);
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--text-secondary);
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .form-group input {
      width: 100%;
      padding: 14px 16px;
      background: var(--bg-input);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      font-family: var(--font-body);
      font-size: 0.95rem;
      transition: var(--transition);
      outline: none;
    }

    .form-group input:focus {
      border-color: var(--su-gold);
      box-shadow: 0 0 0 3px rgba(253,185,39,0.1);
    }

    .form-group input::placeholder {
      color: var(--text-muted);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px 28px;
      border-radius: var(--radius-sm);
      font-family: var(--font-body);
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      border: none;
      outline: none;
      text-decoration: none;
    }

    .btn-primary {
      width: 100%;
      background: linear-gradient(135deg, var(--su-gold), var(--su-gold-dim));
      color: var(--su-blue-dark);
      box-shadow: 0 4px 16px rgba(253,185,39,0.3);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 24px rgba(253,185,39,0.4);
    }

    .btn-secondary {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      color: var(--text-primary);
    }

    .btn-secondary:hover {
      background: var(--bg-card-hover);
      border-color: var(--su-gold);
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-secondary);
      padding: 8px 16px;
    }

    .btn-ghost:hover {
      color: var(--su-gold);
    }

    .btn-small {
      padding: 8px 16px;
      font-size: 0.82rem;
    }

    .btn-danger {
      background: rgba(248,113,113,0.1);
      border: 1px solid rgba(248,113,113,0.3);
      color: var(--danger);
    }

    .btn-danger:hover {
      background: rgba(248,113,113,0.2);
    }

    .login-footer {
      text-align: center;
      margin-top: 24px;
      font-size: 0.82rem;
      color: var(--text-muted);
    }

    .login-footer a {
      color: var(--su-gold);
      text-decoration: none;
    }

    /* =============================================
       MAIN APP LAYOUT
       ============================================= */
    #app {
      display: none;
      min-height: 100vh;
    }

    #app.active {
      display: flex;
      flex-direction: column;
    }

    /* HEADER / TOPBAR */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 28px;
      background: rgba(10,22,40,0.85);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-color);
    }

    .topbar-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .topbar-logo {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, var(--su-gold), var(--su-gold-dim));
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      flex-shrink: 0;
    }

    .topbar-brand {
      font-family: var(--font-display);
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--su-gold);
    }

    .topbar-right {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .topbar-user {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 6px 14px 6px 6px;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 50px;
      cursor: pointer;
      transition: var(--transition);
    }

    .topbar-user:hover { border-color: var(--su-gold); }

    .topbar-avatar {
      width: 30px;
      height: 30px;
      background: var(--su-blue);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 700;
      color: var(--su-gold);
    }

    .topbar-username {
      font-size: 0.85rem;
      font-weight: 500;
    }

    /* NAVIGATION TABS */
    .nav-tabs {
      display: flex;
      gap: 2px;
      padding: 0 28px;
      background: rgba(10,22,40,0.6);
      border-bottom: 1px solid var(--border-color);
      overflow-x: auto;
    }

    .nav-tab {
      padding: 14px 22px;
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--text-muted);
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: var(--transition);
      white-space: nowrap;
      background: none;
      border-top: none;
      border-left: none;
      border-right: none;
      font-family: var(--font-body);
    }

    .nav-tab:hover {
      color: var(--text-secondary);
    }

    .nav-tab.active {
      color: var(--su-gold);
      border-bottom-color: var(--su-gold);
    }

    /* MAIN CONTENT */
    .main-content {
      flex: 1;
      position: relative;
      z-index: 1;
    }

    .page {
      display: none;
      padding: 32px 28px;
      max-width: 1200px;
      margin: 0 auto;
      animation: fadeIn 0.35s ease;
    }

    .page.active { display: block; }

    .page-header {
      margin-bottom: 28px;
    }

    .page-header h2 {
      font-family: var(--font-display);
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 6px;
    }

    .page-header p {
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    /* =============================================
       DASHBOARD PAGE
       ============================================= */
    .dashboard-greeting {
      margin-bottom: 32px;
    }

    .dashboard-greeting h2 {
      font-family: var(--font-display);
      font-size: 2rem;
      font-weight: 700;
    }

    .dashboard-greeting h2 span {
      background: linear-gradient(135deg, var(--su-gold), var(--su-gold-light));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .dashboard-greeting .date-display {
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin-top: 4px;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 32px;
    }

    .stat-card {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      padding: 24px;
      transition: var(--transition);
    }

    .stat-card:hover {
      border-color: var(--su-gold-dim);
      box-shadow: var(--shadow-glow);
    }

    .stat-card .stat-icon {
      width: 42px;
      height: 42px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      margin-bottom: 14px;
    }

    .stat-card .stat-value {
      font-size: 1.6rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .stat-card .stat-label {
      font-size: 0.82rem;
      color: var(--text-secondary);
    }

    .stat-icon.gold { background: rgba(253,185,39,0.12); }
    .stat-icon.blue { background: rgba(0,82,155,0.2); }
    .stat-icon.green { background: rgba(52,211,153,0.12); }
    .stat-icon.red { background: rgba(248,113,113,0.12); }

    /* Next Class Card */
    .next-class-card {
      background: linear-gradient(135deg, var(--su-blue-deep), var(--su-blue-dark));
      border: 1px solid rgba(0,82,155,0.4);
      border-radius: var(--radius-lg);
      padding: 28px;
      margin-bottom: 32px;
      position: relative;
      overflow: hidden;
    }

    .next-class-card::after {
      content: '';
      position: absolute;
      top: -50%;
      right: -20%;
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, rgba(253,185,39,0.08), transparent 70%);
      pointer-events: none;
    }

    .next-class-card .ncc-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: var(--su-gold);
      font-weight: 500;
      margin-bottom: 10px;
    }

    .next-class-card .ncc-name {
      font-family: var(--font-display);
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 6px;
    }

    .next-class-card .ncc-details {
      color: var(--text-secondary);
      font-size: 0.9rem;
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .next-class-card .ncc-details span {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Today's Schedule Quick View */
    .today-schedule {
      margin-bottom: 32px;
    }

    .section-title {
      font-family: var(--font-display);
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .section-title .view-all {
      font-family: var(--font-body);
      font-size: 0.82rem;
      color: var(--su-gold);
      cursor: pointer;
      font-weight: 500;
      background: none;
      border: none;
    }

    .schedule-timeline {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .timeline-item {
      display: flex;
      gap: 16px;
      align-items: stretch;
    }

    .timeline-time {
      width: 70px;
      flex-shrink: 0;
      font-size: 0.82rem;
      font-weight: 500;
      color: var(--text-muted);
      padding-top: 14px;
      text-align: right;
    }

    .timeline-bar {
      width: 3px;
      background: var(--border-color);
      border-radius: 3px;
      position: relative;
      flex-shrink: 0;
    }

    .timeline-bar::before {
      content: '';
      position: absolute;
      top: 16px;
      left: -4px;
      width: 11px;
      height: 11px;
      border-radius: 50%;
      background: var(--su-gold);
      border: 2px solid var(--bg-primary);
    }

    .timeline-card {
      flex: 1;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-sm);
      padding: 14px 18px;
      transition: var(--transition);
      cursor: pointer;
    }

    .timeline-card:hover {
      border-color: var(--su-gold-dim);
      transform: translateX(4px);
    }

    .timeline-card .tc-name {
      font-weight: 600;
      font-size: 0.92rem;
      margin-bottom: 4px;
    }

    .timeline-card .tc-info {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }

    .timeline-card .tc-badge {
      display: inline-block;
      margin-top: 8px;
      padding: 3px 10px;
      background: rgba(253,185,39,0.1);
      color: var(--su-gold);
      border-radius: 20px;
      font-size: 0.72rem;
      font-weight: 500;
    }

    /* =============================================
       SCHEDULE PAGE
       ============================================= */
    .schedule-controls {
      display: flex;
      gap: 12px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    .day-selector {
      display: flex;
      gap: 6px;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-sm);
      padding: 4px;
    }

    .day-btn {
      padding: 8px 16px;
      border: none;
      background: transparent;
      color: var(--text-muted);
      font-family: var(--font-body);
      font-size: 0.82rem;
      font-weight: 500;
      cursor: pointer;
      border-radius: 6px;
      transition: var(--transition);
    }

    .day-btn.active {
      background: var(--su-gold);
      color: var(--su-blue-dark);
    }

    .day-btn:hover:not(.active) {
      color: var(--text-primary);
    }

    .schedule-list {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .class-card {
      display: flex;
      gap: 20px;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      padding: 22px;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .class-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      background: var(--su-gold);
      border-radius: 4px 0 0 4px;
    }

    .class-card:hover {
      border-color: var(--su-gold-dim);
      box-shadow: var(--shadow-glow);
      transform: translateY(-2px);
    }

    .class-card .cc-time {
      width: 100px;
      flex-shrink: 0;
    }

    .class-card .cc-time .time-start {
      font-size: 1.05rem;
      font-weight: 700;
    }

    .class-card .cc-time .time-end {
      font-size: 0.82rem;
      color: var(--text-muted);
    }

    .class-card .cc-body { flex: 1; }

    .class-card .cc-name {
      font-size: 1.05rem;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .class-card .cc-instructor {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .class-card .cc-meta {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }

    .class-card .cc-meta span {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-muted);
    }

    .empty-state .empty-icon {
      font-size: 48px;
      margin-bottom: 16px;
      opacity: 0.5;
    }

    .empty-state p {
      font-size: 0.95rem;
    }

    /* =============================================
       MAP PAGE
       ============================================= */
    .map-container {
      position: relative;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-lg);
      overflow: hidden;
      height: 500px;
      margin-bottom: 24px;
    }

    .campus-map-svg {
      width: 100%;
      height: 100%;
    }

    .map-search {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
    }

    .map-search input {
      flex: 1;
      padding: 12px 18px;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      font-family: var(--font-body);
      font-size: 0.9rem;
      outline: none;
      transition: var(--transition);
    }

    .map-search input:focus {
      border-color: var(--su-gold);
    }

    .buildings-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 14px;
    }

    .building-card {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      padding: 18px;
      cursor: pointer;
      transition: var(--transition);
    }

    .building-card:hover {
      border-color: var(--su-gold-dim);
      transform: translateY(-2px);
      box-shadow: var(--shadow-glow);
    }

    .building-card.highlighted {
      border-color: var(--su-gold);
      background: var(--bg-card-hover);
    }

    .building-card .bc-name {
      font-weight: 600;
      font-size: 0.95rem;
      margin-bottom: 4px;
    }

    .building-card .bc-code {
      font-size: 0.78rem;
      color: var(--su-gold);
      font-weight: 500;
      margin-bottom: 8px;
    }

    .building-card .bc-desc {
      font-size: 0.8rem;
      color: var(--text-secondary);
      line-height: 1.4;
    }

    /* Map Building Markers */
    .map-building {
      cursor: pointer;
      transition: var(--transition);
    }

    .map-building:hover rect,
    .map-building:hover polygon {
      fill: var(--su-gold) !important;
      opacity: 1 !important;
    }

    .map-building text {
      font-family: var(--font-body);
      font-size: 9px;
      fill: var(--text-primary);
      pointer-events: none;
    }

    .map-tooltip {
      position: absolute;
      background: var(--bg-card);
      border: 1px solid var(--su-gold);
      border-radius: var(--radius-sm);
      padding: 12px 16px;
      font-size: 0.82rem;
      pointer-events: none;
      z-index: 10;
      display: none;
      box-shadow: var(--shadow-card);
    }

    .map-tooltip .tt-name {
      font-weight: 600;
      margin-bottom: 2px;
    }

    .map-tooltip .tt-info {
      color: var(--text-secondary);
      font-size: 0.78rem;
    }

    /* =============================================
       CLASS FINDER PAGE
       ============================================= */
    .finder-search {
      display: flex;
      gap: 12px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    .finder-search input {
      flex: 1;
      min-width: 200px;
      padding: 12px 18px;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      font-family: var(--font-body);
      font-size: 0.9rem;
      outline: none;
      transition: var(--transition);
    }

    .finder-search input:focus { border-color: var(--su-gold); }

    .finder-search select {
      padding: 12px 18px;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      font-family: var(--font-body);
      font-size: 0.9rem;
      outline: none;
      cursor: pointer;
    }

    .finder-results {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .finder-card {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      padding: 20px 22px;
      transition: var(--transition);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    .finder-card:hover {
      border-color: var(--su-gold-dim);
    }

    .finder-card .fc-main { flex: 1; min-width: 200px; }

    .finder-card .fc-code {
      font-size: 0.78rem;
      color: var(--su-gold);
      font-weight: 600;
      letter-spacing: 0.5px;
      margin-bottom: 3px;
    }

    .finder-card .fc-name {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .finder-card .fc-details {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      font-size: 0.8rem;
      color: var(--text-secondary);
    }

    .finder-card .fc-details span {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .finder-card .fc-actions {
      flex-shrink: 0;
    }

    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.72rem;
      font-weight: 600;
    }

    .badge-open { background: rgba(52,211,153,0.12); color: var(--success); }
    .badge-waitlist { background: rgba(251,191,36,0.12); color: var(--warning); }
    .badge-full { background: rgba(248,113,113,0.12); color: var(--danger); }

    /* =============================================
       ADD CLASS MODAL
       ============================================= */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(4px);
      z-index: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      animation: fadeIn 0.2s ease;
    }

    .modal-overlay.hidden { display: none; }

    .modal {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-lg);
      padding: 32px;
      width: 100%;
      max-width: 480px;
      max-height: 85vh;
      overflow-y: auto;
      animation: slideUp 0.3s ease;
    }

    .modal h3 {
      font-family: var(--font-display);
      font-size: 1.3rem;
      margin-bottom: 8px;
    }

    .modal .modal-subtitle {
      color: var(--text-secondary);
      font-size: 0.85rem;
      margin-bottom: 24px;
    }

    .modal .form-row {
      display: flex;
      gap: 12px;
    }

    .modal .form-row .form-group {
      flex: 1;
    }

    .modal .form-actions {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      margin-top: 24px;
    }

    /* =============================================
       PROFILE PAGE
       ============================================= */
    .profile-header {
      display: flex;
      align-items: center;
      gap: 24px;
      margin-bottom: 32px;
    }

    .profile-avatar-large {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, var(--su-blue), var(--su-blue-deep));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.6rem;
      font-weight: 700;
      color: var(--su-gold);
      flex-shrink: 0;
      border: 3px solid var(--su-gold-dim);
    }

    .profile-info h2 {
      font-family: var(--font-display);
      font-size: 1.5rem;
      margin-bottom: 4px;
    }

    .profile-info .pi-details {
      color: var(--text-secondary);
      font-size: 0.88rem;
    }

    .profile-section {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      padding: 24px;
      margin-bottom: 20px;
    }

    .profile-section h3 {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 16px;
      color: var(--su-gold);
    }

    .profile-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid var(--border-color);
    }

    .profile-row:last-child { border-bottom: none; }

    .profile-row .pr-label {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .profile-row .pr-value {
      font-size: 0.9rem;
      font-weight: 500;
    }

    /* =============================================
       TOAST NOTIFICATIONS
       ============================================= */
    .toast-container {
      position: fixed;
      bottom: 24px;
      right: 24px;
      z-index: 999;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .toast {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-sm);
      padding: 14px 20px;
      font-size: 0.88rem;
      box-shadow: var(--shadow-card);
      animation: slideIn 0.3s ease, fadeOut 0.3s ease 2.7s forwards;
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 260px;
    }

    .toast.success { border-left: 3px solid var(--success); }
    .toast.error { border-left: 3px solid var(--danger); }
    .toast.info { border-left: 3px solid var(--su-gold); }

    /* =============================================
       ANIMATIONS
       ============================================= */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(40px); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    /* =============================================
       RESPONSIVE
       ============================================= */
    @media (max-width: 768px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }

      .topbar {
        padding: 12px 16px;
      }

      .page {
        padding: 24px 16px;
      }

      .nav-tabs {
        padding: 0 16px;
      }

      .class-card {
        flex-direction: column;
        gap: 8px;
      }

      .class-card .cc-time {
        width: auto;
        display: flex;
        gap: 8px;
      }

      .profile-header {
        flex-direction: column;
        text-align: center;
      }

      .buildings-grid {
        grid-template-columns: 1fr;
      }

      .map-container {
        height: 350px;
      }

      .topbar-brand {
        display: none;
      }
    }
  </style>
</head>
<body>

  <!-- ==================== LOGIN SCREEN ==================== -->
  <div id="login-screen">
    <div class="login-container">
      <div class="login-logo">
        <div class="logo-icon">üéì</div>
        <h1>ClassConnect</h1>
        <p>Southern University A&M College</p>
      </div>
      <div class="login-box">
        <div class="form-group">
          <label>Student ID or Email</label>
          <input type="text" id="login-email" placeholder="e.g. jag_00123456" />
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" id="login-password" placeholder="Enter your password" />
        </div>
        <button class="btn btn-primary" id="login-btn">Sign In</button>
        <div class="login-footer" style="margin-top: 20px;">
          Demo: enter anything to sign in<br />
          <a href="#">Forgot password?</a> ¬∑ <a href="#">New student?</a>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== MAIN APP ==================== -->
  <div id="app">
    <!-- Top Bar -->
    <header class="topbar">
      <div class="topbar-left">
        <div class="topbar-logo">üéì</div>
        <span class="topbar-brand">ClassConnect</span>
      </div>
      <div class="topbar-right">
        <div class="topbar-user" id="user-menu-toggle">
          <div class="topbar-avatar" id="topbar-initials">JS</div>
          <span class="topbar-username" id="topbar-name">Jaguar</span>
        </div>
        <button class="btn btn-ghost btn-small" id="logout-btn">Sign Out</button>
      </div>
    </header>

    <!-- Navigation -->
    <nav class="nav-tabs" id="nav-tabs">
      <button class="nav-tab active" data-page="dashboard">üè† Dashboard</button>
      <button class="nav-tab" data-page="schedule">üìÖ My Schedule</button>
      <button class="nav-tab" data-page="map">üó∫Ô∏è Campus Map</button>
      <button class="nav-tab" data-page="finder">üîç Class Finder</button>
      <button class="nav-tab" data-page="profile">üë§ Profile</button>
    </nav>

    <!-- Content Area -->
    <main class="main-content">

      <!-- ===== DASHBOARD ===== -->
      <section class="page active" id="page-dashboard">
        <div class="dashboard-greeting">
          <h2>Good <span id="greeting-time">morning</span>, <span id="greeting-name">Jaguar</span> üêÜ</h2>
          <div class="date-display" id="current-date"></div>
        </div>

        <div id="next-class-container"></div>

        <div class="dashboard-grid">
          <div class="stat-card">
            <div class="stat-icon gold">üìö</div>
            <div class="stat-value" id="stat-classes">0</div>
            <div class="stat-label">Classes This Semester</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon blue">üïê</div>
            <div class="stat-value" id="stat-credits">0</div>
            <div class="stat-label">Credit Hours</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon green">üìç</div>
            <div class="stat-value" id="stat-buildings">0</div>
            <div class="stat-label">Buildings This Week</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon red">‚è∞</div>
            <div class="stat-value" id="stat-today">0</div>
            <div class="stat-label">Classes Today</div>
          </div>
        </div>

        <div class="today-schedule">
          <div class="section-title">
            Today's Classes
            <button class="view-all" onclick="switchPage('schedule')">View Full Schedule ‚Üí</button>
          </div>
          <div class="schedule-timeline" id="today-timeline"></div>
        </div>
      </section>

      <!-- ===== SCHEDULE ===== -->
      <section class="page" id="page-schedule">
        <div class="page-header">
          <h2>My Schedule</h2>
          <p>Spring 2026 ‚Äî Southern University A&M College</p>
        </div>

        <div class="schedule-controls">
          <div class="day-selector" id="day-selector"></div>
          <button class="btn btn-secondary btn-small" id="add-class-btn">+ Add Class</button>
        </div>

        <div class="schedule-list" id="schedule-list"></div>
      </section>

      <!-- ===== CAMPUS MAP ===== -->
      <section class="page" id="page-map">
        <div class="page-header">
          <h2>Campus Map</h2>
          <p>Navigate Southern University's campus ‚Äî tap a building for details</p>
        </div>

        <div class="map-search">
          <input type="text" id="map-search-input" placeholder="Search buildings, departments..." />
        </div>

        <div class="map-container" id="map-container">
          <div class="map-tooltip" id="map-tooltip">
            <div class="tt-name"></div>
            <div class="tt-info"></div>
          </div>
          <!-- SVG Map rendered by JS -->
        </div>

        <div class="section-title" style="margin-top: 8px;">All Campus Buildings</div>
        <div class="buildings-grid" id="buildings-grid"></div>
      </section>

      <!-- ===== CLASS FINDER ===== -->
      <section class="page" id="page-finder">
        <div class="page-header">
          <h2>Class Finder</h2>
          <p>Search the Spring 2026 course catalog and add classes to your schedule</p>
        </div>

        <div class="finder-search">
          <input type="text" id="finder-search-input" placeholder="Search by course name, code, or instructor..." />
          <select id="finder-dept-filter">
            <option value="">All Departments</option>
          </select>
        </div>

        <div class="finder-results" id="finder-results"></div>
      </section>

      <!-- ===== PROFILE ===== -->
      <section class="page" id="page-profile">
        <div class="profile-header">
          <div class="profile-avatar-large" id="profile-initials">JS</div>
          <div class="profile-info">
            <h2 id="profile-name">Jaguar Student</h2>
            <div class="pi-details" id="profile-subtitle">Computer Science ¬∑ Class of 2027</div>
          </div>
        </div>

        <div class="profile-section">
          <h3>Student Information</h3>
          <div class="profile-row">
            <span class="pr-label">Student ID</span>
            <span class="pr-value" id="profile-sid">JAG-00123456</span>
          </div>
          <div class="profile-row">
            <span class="pr-label">Email</span>
            <span class="pr-value" id="profile-email">student@subr.edu</span>
          </div>
          <div class="profile-row">
            <span class="pr-label">Major</span>
            <span class="pr-value" id="profile-major">Computer Science</span>
          </div>
          <div class="profile-row">
            <span class="pr-label">Concentration</span>
            <span class="pr-value" id="profile-concentration">Cybersecurity</span>
          </div>
          <div class="profile-row">
            <span class="pr-label">Classification</span>
            <span class="pr-value" id="profile-class">Junior</span>
          </div>
          <div class="profile-row">
            <span class="pr-label">Advisor</span>
            <span class="pr-value" id="profile-advisor">Dr. Williams</span>
          </div>
        </div>

        <div class="profile-section">
          <h3>Academic Summary</h3>
          <div class="profile-row">
            <span class="pr-label">GPA</span>
            <span class="pr-value">3.45</span>
          </div>
          <div class="profile-row">
            <span class="pr-label">Credits Completed</span>
            <span class="pr-value">72</span>
          </div>
          <div class="profile-row">
            <span class="pr-label">Credits In Progress</span>
            <span class="pr-value" id="profile-credits-progress">0</span>
          </div>
          <div class="profile-row">
            <span class="pr-label">Credits Remaining</span>
            <span class="pr-value">48</span>
          </div>
        </div>

        <button class="btn btn-danger btn-small" id="profile-logout-btn">Sign Out</button>
      </section>
    </main>
  </div>

  <!-- ==================== ADD CLASS MODAL ==================== -->
  <div class="modal-overlay hidden" id="add-class-modal">
    <div class="modal">
      <h3>Add a New Class</h3>
      <p class="modal-subtitle">Manually add a class to your schedule</p>
      <div class="form-group">
        <label>Course Code</label>
        <input type="text" id="modal-code" placeholder="e.g. CMPS 301" />
      </div>
      <div class="form-group">
        <label>Course Name</label>
        <input type="text" id="modal-name" placeholder="e.g. Data Structures" />
      </div>
      <div class="form-group">
        <label>Instructor</label>
        <input type="text" id="modal-instructor" placeholder="e.g. Dr. Smith" />
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Days</label>
          <input type="text" id="modal-days" placeholder="e.g. MWF" />
        </div>
        <div class="form-group">
          <label>Time</label>
          <input type="text" id="modal-time" placeholder="e.g. 9:00 AM" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>End Time</label>
          <input type="text" id="modal-endtime" placeholder="e.g. 9:50 AM" />
        </div>
        <div class="form-group">
          <label>Credits</label>
          <input type="number" id="modal-credits" placeholder="3" value="3" />
        </div>
      </div>
      <div class="form-group">
        <label>Building / Room</label>
        <input type="text" id="modal-location" placeholder="e.g. Pinchback Hall 210" />
      </div>
      <div class="form-actions">
        <button class="btn btn-ghost" id="modal-cancel-btn">Cancel</button>
        <button class="btn btn-primary" style="width:auto;" id="modal-save-btn">Add Class</button>
      </div>
    </div>
  </div>

  <!-- ==================== TOAST CONTAINER ==================== -->
  <div class="toast-container" id="toast-container"></div>

  <!-- ==================== JAVASCRIPT ==================== -->
  <script>
    // =========================================================
    //  DATA: SOUTHERN UNIVERSITY BUILDINGS
    // =========================================================
    const BUILDINGS = [
      { id: 'pinchback', name: 'Pinchback Hall', code: 'PH', desc: 'Science & Engineering classrooms, computer labs', x: 220, y: 180, w: 70, h: 45 },
      { id: 'higgins', name: 'T.H. Harris Hall', code: 'TH', desc: 'College of Business, lecture halls', x: 350, y: 140, w: 65, h: 40 },
      { id: 'stewart', name: 'Stewart Hall', code: 'SH', desc: 'Humanities & Social Sciences', x: 130, y: 260, w: 60, h: 40 },
      { id: 'smith_brown', name: 'Smith-Brown Memorial Union', code: 'SB', desc: 'Student Union, dining, bookstore', x: 310, y: 250, w: 80, h: 50 },
      { id: 'clark', name: 'Clark Activity Center', code: 'CA', desc: 'Athletics, recreation, events', x: 480, y: 160, w: 75, h: 50 },
      { id: 'mumford', name: 'A.C. Mumford Stadium', code: 'MS', desc: 'Football stadium & athletics fields', x: 500, y: 290, w: 90, h: 55 },
      { id: 'library', name: 'John B. Cade Library', code: 'LB', desc: 'Main library, study rooms, research', x: 200, y: 100, w: 70, h: 40 },
      { id: 'lee', name: 'Lee Hall', code: 'LH', desc: 'Fine Arts, music rooms, auditorium', x: 100, y: 150, w: 55, h: 40 },
      { id: 'mech', name: 'Mechanical Engineering Bldg', code: 'ME', desc: 'Engineering labs & workshops', x: 380, y: 80, w: 65, h: 35 },
      { id: 'nursing', name: 'Nursing Building', code: 'NB', desc: 'College of Nursing & Allied Health', x: 450, y: 90, w: 60, h: 35 },
      { id: 'admin', name: 'J.S. Clark Admin Building', code: 'AD', desc: 'Admissions, registrar, financial aid', x: 260, y: 50, w: 70, h: 35 },
      { id: 'seymour', name: 'Seymour Gymnasium', code: 'SG', desc: 'Basketball courts, fitness center', x: 160, y: 340, w: 65, h: 40 },
      { id: 'jones', name: 'Augustus C. Blanks Hall', code: 'BH', desc: 'Education & Computer Science dept', x: 340, y: 340, w: 70, h: 40 },
      { id: 'pennington', name: 'Pennington Hall', code: 'PN', desc: 'Residence hall', x: 80, y: 60, w: 55, h: 35 },
      { id: 'totty', name: 'Totty Hall', code: 'TT', desc: 'Residence hall', x: 550, y: 360, w: 55, h: 35 },
    ];

    // =========================================================
    //  DATA: COURSE CATALOG
    // =========================================================
    const COURSE_CATALOG = [
      { code: 'CMPS 161', name: 'Introduction to Programming', instructor: 'Dr. Jackson', dept: 'Computer Science', days: 'MWF', time: '9:00 AM', endTime: '9:50 AM', building: 'pinchback', room: '210', credits: 3, seats: 35, enrolled: 28, status: 'open' },
      { code: 'CMPS 301', name: 'Data Structures', instructor: 'Dr. Williams', dept: 'Computer Science', days: 'TTh', time: '10:30 AM', endTime: '11:45 AM', building: 'pinchback', room: '305', credits: 3, seats: 30, enrolled: 30, status: 'full' },
      { code: 'CMPS 340', name: 'Computer Networks', instructor: 'Dr. Brown', dept: 'Computer Science', days: 'MWF', time: '11:00 AM', endTime: '11:50 AM', building: 'jones', room: '102', credits: 3, seats: 25, enrolled: 22, status: 'open' },
      { code: 'CMPS 370', name: 'Cybersecurity Fundamentals', instructor: 'Dr. Davis', dept: 'Computer Science', days: 'TTh', time: '1:00 PM', endTime: '2:15 PM', building: 'pinchback', room: '410', credits: 3, seats: 25, enrolled: 25, status: 'waitlist' },
      { code: 'CMPS 415', name: 'Operating Systems', instructor: 'Dr. Jackson', dept: 'Computer Science', days: 'MWF', time: '2:00 PM', endTime: '2:50 PM', building: 'jones', room: '205', credits: 3, seats: 30, enrolled: 18, status: 'open' },
      { code: 'CMPS 450', name: 'Software Engineering', instructor: 'Dr. Thompson', dept: 'Computer Science', days: 'TTh', time: '3:30 PM', endTime: '4:45 PM', building: 'pinchback', room: '310', credits: 3, seats: 25, enrolled: 20, status: 'open' },
      { code: 'MATH 250', name: 'Calculus I', instructor: 'Dr. Roberts', dept: 'Mathematics', days: 'MWF', time: '8:00 AM', endTime: '8:50 AM', building: 'higgins', room: '112', credits: 4, seats: 40, enrolled: 38, status: 'open' },
      { code: 'MATH 251', name: 'Calculus II', instructor: 'Dr. Adams', dept: 'Mathematics', days: 'TTh', time: '9:00 AM', endTime: '10:15 AM', building: 'higgins', room: '115', credits: 4, seats: 35, enrolled: 35, status: 'full' },
      { code: 'MATH 310', name: 'Linear Algebra', instructor: 'Dr. Roberts', dept: 'Mathematics', days: 'MWF', time: '1:00 PM', endTime: '1:50 PM', building: 'higgins', room: '210', credits: 3, seats: 30, enrolled: 21, status: 'open' },
      { code: 'ENGL 101', name: 'Freshman Composition I', instructor: 'Prof. Martin', dept: 'English', days: 'MWF', time: '10:00 AM', endTime: '10:50 AM', building: 'stewart', room: '105', credits: 3, seats: 25, enrolled: 24, status: 'open' },
      { code: 'ENGL 102', name: 'Freshman Composition II', instructor: 'Prof. Wilson', dept: 'English', days: 'TTh', time: '11:00 AM', endTime: '12:15 PM', building: 'stewart', room: '202', credits: 3, seats: 25, enrolled: 25, status: 'full' },
      { code: 'PHYS 201', name: 'General Physics I', instructor: 'Dr. Chang', dept: 'Physics', days: 'MWF', time: '12:00 PM', endTime: '12:50 PM', building: 'pinchback', room: '115', credits: 4, seats: 30, enrolled: 23, status: 'open' },
      { code: 'PHYS 201L', name: 'Physics I Lab', instructor: 'Dr. Chang', dept: 'Physics', days: 'W', time: '2:00 PM', endTime: '4:50 PM', building: 'pinchback', room: '120', credits: 0, seats: 20, enrolled: 18, status: 'open' },
      { code: 'BIOL 101', name: 'General Biology', instructor: 'Dr. Green', dept: 'Biology', days: 'TTh', time: '8:00 AM', endTime: '9:15 AM', building: 'pinchback', room: '105', credits: 3, seats: 40, enrolled: 37, status: 'open' },
      { code: 'HIST 201', name: 'American History I', instructor: 'Prof. Carter', dept: 'History', days: 'MWF', time: '10:00 AM', endTime: '10:50 AM', building: 'stewart', room: '301', credits: 3, seats: 35, enrolled: 30, status: 'open' },
      { code: 'ACCT 201', name: 'Principles of Accounting I', instructor: 'Dr. Harris', dept: 'Business', days: 'TTh', time: '2:00 PM', endTime: '3:15 PM', building: 'higgins', room: '305', credits: 3, seats: 35, enrolled: 33, status: 'open' },
      { code: 'MGMT 310', name: 'Principles of Management', instructor: 'Dr. Lewis', dept: 'Business', days: 'MWF', time: '3:00 PM', endTime: '3:50 PM', building: 'higgins', room: '208', credits: 3, seats: 30, enrolled: 30, status: 'waitlist' },
      { code: 'NURS 201', name: 'Foundations of Nursing', instructor: 'Prof. Mitchell', dept: 'Nursing', days: 'TTh', time: '8:00 AM', endTime: '9:15 AM', building: 'nursing', room: '102', credits: 4, seats: 25, enrolled: 24, status: 'open' },
      { code: 'MUSC 101', name: 'Music Appreciation', instructor: 'Prof. Taylor', dept: 'Fine Arts', days: 'TTh', time: '12:30 PM', endTime: '1:45 PM', building: 'lee', room: '205', credits: 3, seats: 40, enrolled: 35, status: 'open' },
      { code: 'ENGR 220', name: 'Statics & Dynamics', instructor: 'Dr. Patel', dept: 'Engineering', days: 'MWF', time: '11:00 AM', endTime: '11:50 AM', building: 'mech', room: '110', credits: 3, seats: 25, enrolled: 22, status: 'open' },
    ];

    // =========================================================
    //  STATE
    // =========================================================
    let currentUser = null;
    let mySchedule = [];
    let selectedDay = getTodayDayCode();

    function getTodayDayCode() {
      const d = new Date().getDay();
      const map = { 0: 'M', 1: 'M', 2: 'T', 3: 'W', 4: 'Th', 5: 'F', 6: 'M' };
      return map[d];
    }

    // =========================================================
    //  UTILITIES
    // =========================================================
    function showToast(message, type = 'info') {
      const container = document.getElementById('toast-container');
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      const icons = { success: '‚úÖ', error: '‚ùå', info: '‚ÑπÔ∏è' };
      toast.innerHTML = `<span>${icons[type] || ''}</span> ${message}`;
      container.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }

    function getBuilding(id) {
      return BUILDINGS.find(b => b.id === id);
    }

    function getBuildingName(id) {
      const b = getBuilding(id);
      return b ? b.name : id;
    }

    function timeToMinutes(timeStr) {
      const match = timeStr.match(/(\d+):(\d+)\s*(AM|PM)/i);
      if (!match) return 0;
      let h = parseInt(match[1]);
      const m = parseInt(match[2]);
      const ampm = match[3].toUpperCase();
      if (ampm === 'PM' && h !== 12) h += 12;
      if (ampm === 'AM' && h === 12) h = 0;
      return h * 60 + m;
    }

    function dayMatchesCode(daysStr, code) {
      if (code === 'Th') return daysStr.includes('Th');
      if (code === 'T') return daysStr.includes('T') && !daysStr.includes('Th');
      return daysStr.includes(code);
    }

    function matchesDayCode(daysStr, code) {
      if (code === 'Th') return /Th/.test(daysStr);
      if (code === 'T') {
        // Match T but not as part of Th
        return /T(?!h)/.test(daysStr);
      }
      return daysStr.includes(code);
    }

    // =========================================================
    //  LOGIN
    // =========================================================
    document.getElementById('login-btn').addEventListener('click', doLogin);
    document.getElementById('login-password').addEventListener('keydown', e => { if (e.key === 'Enter') doLogin(); });

    function doLogin() {
      const email = document.getElementById('login-email').value.trim() || 'Jaguar';
      currentUser = {
        name: email.includes('@') ? email.split('@')[0] : email,
        fullName: email.includes('@') ? email.split('@')[0] : email,
        email: email.includes('@') ? email : email + '@subr.edu',
        sid: 'JAG-' + String(Math.floor(Math.random() * 900000) + 100000),
      };

      // Set default schedule
      mySchedule = [
        { ...COURSE_CATALOG[0] },   // Intro to Programming
        { ...COURSE_CATALOG[2] },   // Computer Networks
        { ...COURSE_CATALOG[3] },   // Cybersecurity
        { ...COURSE_CATALOG[4] },   // Operating Systems
        { ...COURSE_CATALOG[6] },   // Calculus I
      ];

      document.getElementById('login-screen').classList.add('hidden');
      document.getElementById('app').classList.add('active');
      initApp();
      showToast(`Welcome back, ${currentUser.name}!`, 'success');
    }

    document.getElementById('logout-btn').addEventListener('click', doLogout);
    document.getElementById('profile-logout-btn').addEventListener('click', doLogout);

    function doLogout() {
      currentUser = null;
      mySchedule = [];
      document.getElementById('login-screen').classList.remove('hidden');
      document.getElementById('app').classList.remove('active');
      document.getElementById('login-email').value = '';
      document.getElementById('login-password').value = '';
    }

    // =========================================================
    //  NAVIGATION
    // =========================================================
    document.querySelectorAll('.nav-tab').forEach(tab => {
      tab.addEventListener('click', () => switchPage(tab.dataset.page));
    });

    function switchPage(page) {
      document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.querySelector(`.nav-tab[data-page="${page}"]`).classList.add('active');
      document.getElementById(`page-${page}`).classList.add('active');

      if (page === 'dashboard') renderDashboard();
      if (page === 'schedule') renderSchedule();
      if (page === 'map') renderMap();
      if (page === 'finder') renderFinder();
      if (page === 'profile') renderProfile();
    }

    // =========================================================
    //  INIT APP
    // =========================================================
    function initApp() {
      updateUserUI();
      renderDashboard();
      renderDaySelectorButtons();
      renderMap();
      renderFinderFilters();
      renderProfile();
    }

    function updateUserUI() {
      const initials = currentUser.name.substring(0, 2).toUpperCase();
      document.getElementById('topbar-initials').textContent = initials;
      document.getElementById('topbar-name').textContent = currentUser.name;
      document.getElementById('greeting-name').textContent = currentUser.name;
      document.getElementById('profile-initials').textContent = initials;
      document.getElementById('profile-name').textContent = currentUser.fullName;
      document.getElementById('profile-email').textContent = currentUser.email;
      document.getElementById('profile-sid').textContent = currentUser.sid;

      const h = new Date().getHours();
      let greeting = 'morning';
      if (h >= 12 && h < 17) greeting = 'afternoon';
      else if (h >= 17) greeting = 'evening';
      document.getElementById('greeting-time').textContent = greeting;

      const now = new Date();
      const opts = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', opts);
    }

    // =========================================================
    //  DASHBOARD
    // =========================================================
    function renderDashboard() {
      // Stats
      const totalCredits = mySchedule.reduce((s, c) => s + (c.credits || 0), 0);
      const uniqueBuildings = [...new Set(mySchedule.map(c => c.building))].length;
      const todayCode = getTodayDayCode();
      const todayClasses = mySchedule.filter(c => matchesDayCode(c.days, todayCode));

      document.getElementById('stat-classes').textContent = mySchedule.length;
      document.getElementById('stat-credits').textContent = totalCredits;
      document.getElementById('stat-buildings').textContent = uniqueBuildings;
      document.getElementById('stat-today').textContent = todayClasses.length;
      document.getElementById('profile-credits-progress').textContent = totalCredits;

      // Next class
      const container = document.getElementById('next-class-container');
      const now = new Date();
      const currentMinutes = now.getHours() * 60 + now.getMinutes();
      const upcoming = todayClasses
        .filter(c => timeToMinutes(c.time) > currentMinutes)
        .sort((a, b) => timeToMinutes(a.time) - timeToMinutes(b.time));

      if (upcoming.length > 0) {
        const next = upcoming[0];
        const bldg = getBuildingName(next.building);
        container.innerHTML = `
          <div class="next-class-card">
            <div class="ncc-label">‚ö° Next Class</div>
            <div class="ncc-name">${next.name}</div>
            <div class="ncc-details">
              <span>üïê ${next.time} ‚Äì ${next.endTime}</span>
              <span>üìç ${bldg} ${next.room || ''}</span>
              <span>üë§ ${next.instructor}</span>
            </div>
          </div>
        `;
      } else if (todayClasses.length > 0) {
        container.innerHTML = `
          <div class="next-class-card">
            <div class="ncc-label">‚úÖ All Done!</div>
            <div class="ncc-name">No more classes today</div>
            <div class="ncc-details"><span>You had ${todayClasses.length} class${todayClasses.length !== 1 ? 'es' : ''} today</span></div>
          </div>
        `;
      } else {
        container.innerHTML = `
          <div class="next-class-card">
            <div class="ncc-label">üìÖ Schedule</div>
            <div class="ncc-name">No classes today</div>
            <div class="ncc-details"><span>Enjoy your day off, Jaguar! üêÜ</span></div>
          </div>
        `;
      }

      // Today timeline
      const timeline = document.getElementById('today-timeline');
      if (todayClasses.length === 0) {
        timeline.innerHTML = `<div class="empty-state"><div class="empty-icon">üì≠</div><p>No classes scheduled for today</p></div>`;
        return;
      }

      todayClasses.sort((a, b) => timeToMinutes(a.time) - timeToMinutes(b.time));
      timeline.innerHTML = todayClasses.map(c => {
        const bldg = getBuildingName(c.building);
        const isPast = timeToMinutes(c.endTime) < currentMinutes;
        return `
          <div class="timeline-item">
            <div class="timeline-time">${c.time}</div>
            <div class="timeline-bar"></div>
            <div class="timeline-card" onclick="switchPage('schedule')">
              <div class="tc-name">${c.name}</div>
              <div class="tc-info">${bldg} ${c.room || ''} ¬∑ ${c.instructor}</div>
              ${isPast ? '<span class="tc-badge" style="background:rgba(52,211,153,0.1);color:var(--success)">Completed</span>' : '<span class="tc-badge">Upcoming</span>'}
            </div>
          </div>
        `;
      }).join('');
    }

    // =========================================================
    //  SCHEDULE
    // =========================================================
    function renderDaySelectorButtons() {
      const days = [
        { code: 'M', label: 'Mon' },
        { code: 'T', label: 'Tue' },
        { code: 'W', label: 'Wed' },
        { code: 'Th', label: 'Thu' },
        { code: 'F', label: 'Fri' },
      ];
      const selector = document.getElementById('day-selector');
      selector.innerHTML = days.map(d =>
        `<button class="day-btn ${d.code === selectedDay ? 'active' : ''}" data-day="${d.code}">${d.label}</button>`
      ).join('');

      selector.querySelectorAll('.day-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          selectedDay = btn.dataset.day;
          selector.querySelectorAll('.day-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          renderSchedule();
        });
      });
    }

    function renderSchedule() {
      const list = document.getElementById('schedule-list');
      const filtered = mySchedule.filter(c => matchesDayCode(c.days, selectedDay));
      filtered.sort((a, b) => timeToMinutes(a.time) - timeToMinutes(b.time));

      if (filtered.length === 0) {
        list.innerHTML = `<div class="empty-state"><div class="empty-icon">üéâ</div><p>No classes on this day ‚Äî time to study or relax!</p></div>`;
        return;
      }

      list.innerHTML = filtered.map((c, i) => {
        const bldg = getBuildingName(c.building);
        return `
          <div class="class-card" style="animation-delay: ${i * 0.05}s">
            <div class="cc-time">
              <div class="time-start">${c.time}</div>
              <div class="time-end">${c.endTime}</div>
            </div>
            <div class="cc-body">
              <div class="cc-name">${c.code} ‚Äî ${c.name}</div>
              <div class="cc-instructor">${c.instructor}</div>
              <div class="cc-meta">
                <span>üìç ${bldg} ${c.room || ''}</span>
                <span>üìÖ ${c.days}</span>
                <span>üìö ${c.credits} credits</span>
              </div>
            </div>
            <button class="btn btn-danger btn-small" onclick="removeClass(${i})" title="Remove">‚úï</button>
          </div>
        `;
      }).join('');
    }

    function removeClass(scheduleIndex) {
      // We need to find the correct class in the full schedule
      const filtered = mySchedule.filter(c => matchesDayCode(c.days, selectedDay));
      filtered.sort((a, b) => timeToMinutes(a.time) - timeToMinutes(b.time));
      const toRemove = filtered[scheduleIndex];
      if (!toRemove) return;
      const realIndex = mySchedule.indexOf(toRemove);
      if (realIndex > -1) {
        mySchedule.splice(realIndex, 1);
        renderSchedule();
        renderDashboard();
        showToast(`Removed ${toRemove.code}`, 'info');
      }
    }

    // =========================================================
    //  ADD CLASS MODAL
    // =========================================================
    document.getElementById('add-class-btn').addEventListener('click', () => {
      document.getElementById('add-class-modal').classList.remove('hidden');
    });

    document.getElementById('modal-cancel-btn').addEventListener('click', () => {
      document.getElementById('add-class-modal').classList.add('hidden');
    });

    document.getElementById('modal-save-btn').addEventListener('click', () => {
      const code = document.getElementById('modal-code').value.trim();
      const name = document.getElementById('modal-name').value.trim();
      const instructor = document.getElementById('modal-instructor').value.trim();
      const days = document.getElementById('modal-days').value.trim();
      const time = document.getElementById('modal-time').value.trim();
      const endTime = document.getElementById('modal-endtime').value.trim();
      const credits = parseInt(document.getElementById('modal-credits').value) || 3;
      const location = document.getElementById('modal-location').value.trim();

      if (!code || !name || !days || !time) {
        showToast('Please fill in code, name, days, and time', 'error');
        return;
      }

      mySchedule.push({
        code, name, instructor: instructor || 'TBA', days, time,
        endTime: endTime || time, credits,
        building: '', room: location, dept: 'Custom',
        status: 'open', seats: 0, enrolled: 0,
      });

      document.getElementById('add-class-modal').classList.add('hidden');
      // Reset form
      ['modal-code','modal-name','modal-instructor','modal-days','modal-time','modal-endtime','modal-location'].forEach(id => document.getElementById(id).value = '');
      document.getElementById('modal-credits').value = '3';
      renderSchedule();
      renderDashboard();
      showToast(`Added ${code} to your schedule!`, 'success');
    });

    // Close modal on overlay click
    document.getElementById('add-class-modal').addEventListener('click', e => {
      if (e.target === e.currentTarget) e.currentTarget.classList.add('hidden');
    });

    // =========================================================
    //  CAMPUS MAP (SVG)
    // =========================================================
    function renderMap() {
      const container = document.getElementById('map-container');
      const tooltip = document.getElementById('map-tooltip');

      // Create SVG campus map
      let svgContent = `
        <svg class="campus-map-svg" viewBox="0 0 700 440" xmlns="http://www.w3.org/2000/svg">
          <!-- Background -->
          <defs>
            <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
              <path d="M 20 0 L 0 0 0 20" fill="none" stroke="rgba(30,52,84,0.3)" stroke-width="0.5"/>
            </pattern>
          </defs>
          <rect width="700" height="440" fill="#0D1A2E" />
          <rect width="700" height="440" fill="url(#grid)" />

          <!-- Roads -->
          <line x1="0" y1="230" x2="700" y2="230" stroke="rgba(90,116,153,0.25)" stroke-width="8" stroke-dasharray="12 6"/>
          <line x1="300" y1="0" x2="300" y2="440" stroke="rgba(90,116,153,0.25)" stroke-width="6" stroke-dasharray="10 5"/>
          <line x1="0" y1="120" x2="700" y2="120" stroke="rgba(90,116,153,0.15)" stroke-width="4" stroke-dasharray="8 4"/>
          <line x1="450" y1="0" x2="450" y2="440" stroke="rgba(90,116,153,0.15)" stroke-width="4" stroke-dasharray="8 4"/>

          <!-- Path labels -->
          <text x="620" y="224" fill="rgba(139,163,196,0.4)" font-size="8" font-family="DM Sans">Harding Blvd</text>
          <text x="305" y="20" fill="rgba(139,163,196,0.4)" font-size="8" font-family="DM Sans">Swan Ave</text>

          <!-- Green spaces -->
          <ellipse cx="250" cy="200" rx="30" ry="20" fill="rgba(52,211,153,0.06)" />
          <ellipse cx="420" cy="200" rx="25" ry="18" fill="rgba(52,211,153,0.06)" />

          <!-- Buildings -->
      `;

      BUILDINGS.forEach(b => {
        const isInSchedule = mySchedule.some(c => c.building === b.id);
        const fillColor = isInSchedule ? 'rgba(253,185,39,0.35)' : 'rgba(0,82,155,0.3)';
        const strokeColor = isInSchedule ? 'rgba(253,185,39,0.7)' : 'rgba(0,82,155,0.5)';

        svgContent += `
          <g class="map-building" data-id="${b.id}"
             onmouseenter="showMapTooltip(event, '${b.id}')"
             onmouseleave="hideMapTooltip()">
            <rect x="${b.x}" y="${b.y}" width="${b.w}" height="${b.h}"
                  rx="4" fill="${fillColor}" stroke="${strokeColor}" stroke-width="1.5"/>
            <text x="${b.x + b.w/2}" y="${b.y + b.h/2 + 3}" text-anchor="middle"
                  font-size="9" fill="${isInSchedule ? '#FDB927' : '#8BA3C4'}" font-weight="${isInSchedule ? '700' : '500'}"
                  font-family="DM Sans, sans-serif">${b.code}</text>
          </g>
        `;
      });

      svgContent += `
          <!-- Legend -->
          <rect x="16" y="395" width="12" height="12" rx="2" fill="rgba(253,185,39,0.35)" stroke="rgba(253,185,39,0.7)" stroke-width="1"/>
          <text x="34" y="405" fill="#8BA3C4" font-size="9" font-family="DM Sans">Your classes</text>
          <rect x="120" y="395" width="12" height="12" rx="2" fill="rgba(0,82,155,0.3)" stroke="rgba(0,82,155,0.5)" stroke-width="1"/>
          <text x="138" y="405" fill="#8BA3C4" font-size="9" font-family="DM Sans">Other buildings</text>

          <!-- Title -->
          <text x="350" y="430" text-anchor="middle" fill="rgba(139,163,196,0.35)" font-size="10" font-family="DM Sans" letter-spacing="3">SOUTHERN UNIVERSITY ‚Äî MAIN CAMPUS</text>
        </svg>
      `;

      // Keep tooltip, replace rest
      container.innerHTML = '';
      container.innerHTML = svgContent;
      container.appendChild(tooltip);

      // Building cards
      renderBuildingsGrid();
    }

    function showMapTooltip(event, buildingId) {
      const b = getBuilding(buildingId);
      if (!b) return;
      const tooltip = document.getElementById('map-tooltip');
      const container = document.getElementById('map-container');
      const rect = container.getBoundingClientRect();

      tooltip.querySelector('.tt-name').textContent = b.name;
      const classesHere = mySchedule.filter(c => c.building === b.id);
      tooltip.querySelector('.tt-info').textContent = classesHere.length > 0
        ? `${classesHere.length} class${classesHere.length > 1 ? 'es' : ''} here`
        : b.desc;

      tooltip.style.display = 'block';
      const x = event.clientX - rect.left + 12;
      const y = event.clientY - rect.top - 10;
      tooltip.style.left = Math.min(x, rect.width - 200) + 'px';
      tooltip.style.top = Math.max(y, 0) + 'px';
    }

    function hideMapTooltip() {
      document.getElementById('map-tooltip').style.display = 'none';
    }

    function renderBuildingsGrid(filter = '') {
      const grid = document.getElementById('buildings-grid');
      const filtered = BUILDINGS.filter(b =>
        b.name.toLowerCase().includes(filter.toLowerCase()) ||
        b.code.toLowerCase().includes(filter.toLowerCase()) ||
        b.desc.toLowerCase().includes(filter.toLowerCase())
      );

      grid.innerHTML = filtered.map(b => {
        const classesHere = mySchedule.filter(c => c.building === b.id);
        const highlighted = classesHere.length > 0 ? 'highlighted' : '';
        return `
          <div class="building-card ${highlighted}">
            <div class="bc-name">${b.name}</div>
            <div class="bc-code">${b.code}${classesHere.length > 0 ? ` ¬∑ ${classesHere.length} class${classesHere.length > 1 ? 'es' : ''}` : ''}</div>
            <div class="bc-desc">${b.desc}</div>
          </div>
        `;
      }).join('');
    }

    // Map search
    document.getElementById('map-search-input').addEventListener('input', e => {
      renderBuildingsGrid(e.target.value);
    });

    // =========================================================
    //  CLASS FINDER
    // =========================================================
    function renderFinderFilters() {
      const depts = [...new Set(COURSE_CATALOG.map(c => c.dept))].sort();
      const select = document.getElementById('finder-dept-filter');
      select.innerHTML = '<option value="">All Departments</option>' +
        depts.map(d => `<option value="${d}">${d}</option>`).join('');
      renderFinder();
    }

    function renderFinder() {
      const query = (document.getElementById('finder-search-input')?.value || '').toLowerCase();
      const dept = document.getElementById('finder-dept-filter')?.value || '';

      let results = COURSE_CATALOG.filter(c => {
        const matchesQuery = !query ||
          c.code.toLowerCase().includes(query) ||
          c.name.toLowerCase().includes(query) ||
          c.instructor.toLowerCase().includes(query);
        const matchesDept = !dept || c.dept === dept;
        return matchesQuery && matchesDept;
      });

      const container = document.getElementById('finder-results');

      if (results.length === 0) {
        container.innerHTML = `<div class="empty-state"><div class="empty-icon">üîç</div><p>No courses match your search</p></div>`;
        return;
      }

      container.innerHTML = results.map(c => {
        const bldg = getBuildingName(c.building);
        const inSchedule = mySchedule.some(s => s.code === c.code);
        const badgeClass = c.status === 'open' ? 'badge-open' : (c.status === 'waitlist' ? 'badge-waitlist' : 'badge-full');
        const statusLabel = c.status.charAt(0).toUpperCase() + c.status.slice(1);

        return `
          <div class="finder-card">
            <div class="fc-main">
              <div class="fc-code">${c.code} ¬∑ <span class="badge ${badgeClass}">${statusLabel} (${c.enrolled}/${c.seats})</span></div>
              <div class="fc-name">${c.name}</div>
              <div class="fc-details">
                <span>üë§ ${c.instructor}</span>
                <span>üìÖ ${c.days} ${c.time}‚Äì${c.endTime}</span>
                <span>üìç ${bldg} ${c.room}</span>
                <span>üìö ${c.credits} cr</span>
              </div>
            </div>
            <div class="fc-actions">
              ${inSchedule
                ? `<button class="btn btn-ghost btn-small" disabled style="color:var(--success)">‚úì Added</button>`
                : `<button class="btn btn-secondary btn-small" onclick="addCourseToSchedule('${c.code}')">+ Add</button>`
              }
            </div>
          </div>
        `;
      }).join('');
    }

    function addCourseToSchedule(code) {
      const course = COURSE_CATALOG.find(c => c.code === code);
      if (!course) return;
      if (mySchedule.some(s => s.code === code)) {
        showToast(`${code} is already in your schedule`, 'info');
        return;
      }
      mySchedule.push({ ...course });
      renderFinder();
      renderDashboard();
      renderMap();
      showToast(`Added ${code}: ${course.name}`, 'success');
    }

    // Finder search listeners
    document.getElementById('finder-search-input').addEventListener('input', renderFinder);
    document.getElementById('finder-dept-filter').addEventListener('change', renderFinder);

    // =========================================================
    //  PROFILE
    // =========================================================
    function renderProfile() {
      if (!currentUser) return;
      const totalCredits = mySchedule.reduce((s, c) => s + (c.credits || 0), 0);
      document.getElementById('profile-credits-progress').textContent = totalCredits;
    }

    // =========================================================
    //  MAKE FUNCTIONS GLOBALLY ACCESSIBLE
    // =========================================================
    window.showMapTooltip = showMapTooltip;
    window.hideMapTooltip = hideMapTooltip;
    window.switchPage = switchPage;
    window.removeClass = removeClass;
    window.addCourseToSchedule = addCourseToSchedule;
  </script>
</body>
</html>
